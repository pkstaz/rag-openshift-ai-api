# =============================================================================
# RAG OpenShift AI API - Helm Values
# =============================================================================
# Default configuration for OpenShift deployment

# Image configuration
image:
  repository: rag-openshift-ai-api
  tag: "latest"
  pullPolicy: "Always"

# Application configuration
app:
  name: "rag-api"
  port: 8000
  replicas: 2

# Service configuration
service:
  type: ClusterIP
  port: 8000
  targetPort: 8000

# Route configuration (OpenShift)
route:
  enabled: true
  hostname: ""  # Auto-generated by OpenShift

# Resource configuration
resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "2000m"
    memory: "4Gi"

# Elasticsearch configuration
elasticsearch:
  url: "https://elasticsearch:9200"
  indexName: "rag_documents"
  username: "elastic"
  password: "changeme"
  timeout: 30
  vectorDimension: 384

# vLLM configuration
vllm:
  endpoint: "http://vllm-server:8001"
  defaultModel: "RedHatAI/granite-3.1-8b-instruct"
  timeout: 60
  temperature: 0.7
  maxTokens: 512

# Embedding configuration
embedding:
  modelName: "sentence-transformers/all-MiniLM-L6-v2"
  device: "cpu"
  batchSize: 32

# RAG configuration
rag:
  topK: 5
  similarityThreshold: 0.7
  searchType: "vector"
  chunkSize: 1000
  chunkOverlap: 200

# API configuration
api:
  debug: false
  logLevel: "INFO"
  corsOrigins: ["*"]
  corsMethods: ["GET", "POST", "PUT", "DELETE"]

# Monitoring configuration
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: "30s"
  prometheusRule:
    enabled: true

# Security configuration
security:
  runAsNonRoot: true
  runAsUser: 1001
  fsGroup: 1001
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

# Network policy
networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: allowed-namespace
      ports:
        - protocol: TCP
          port: 8000

# Horizontal Pod Autoscaler
hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget
pdb:
  enabled: true
  minAvailable: 1

# Service Account
serviceAccount:
  create: true
  name: "rag-api-sa"

# ConfigMap and Secret
configMap:
  create: true
  name: "rag-api-config"

secret:
  create: true
  name: "rag-api-secrets" 